Вся комунікація і коментарі українською мовою.
Ultrathink during each request processing

Технічний стек:
Backend: Go + Fiber
Frontend: Tabler UI + Alpine.js
База даних: PostgreSQL + GORM
Кешування: Redis
Файлове сховище: Backblaze
Автентифікація: JWT + OAuth

# Детальна структура проекту TimeBride

## Огляд
TimeBride - це SaaS CRM система, яка спрощує управління фото та відео бізнесом для професійних фотографів та відеографів. Система дозволяє оптимізувати робочі процеси, включаючи бронювання клієнтів, управління проектами та фінансові операції.

## Основні компоненти

### Моделі (`internal/models/`)
- `models.go` - базові структури моделей
- `auth.go` - моделі для аутентифікації
- `booking.go` - модель бронювань
- `client.go` - модель клієнтів
- `file.go` - модель файлів
- `price_template.go` - моделі для цін
- `team_member.go` - моделі для команди
- `template.go` - модель шаблонів
- `user.go` - модель користувача
- `view_models.go` - моделі для відображення
- `validation.go` - валідація моделей
- `errors.go` - помилки моделей

### Сервіси (`internal/services/`)
- `services.go` - загальні інтерфейси та типи
Підсервіси:
- `auth/` - аутентифікація
- `booking/` - бронювання
- `client/` - клієнти
- `price/` - ціни
- `storage/` - файлове сховище
- `team/` - команда
- `template/` - шаблони
- `user/` - користувачі

Кожен сервіс має:
- `interface.go` - визначення інтерфейсу
- `service.go` - реалізація

### Обробники (`internal/handlers/`)
- `handlers.go` - загальні функції
- `interfaces/` - інтерфейси обробників

Кожен ресурс має свій handler:
- `auth/` - аутентифікація
- `booking/` - бронювання
- `client/` - клієнти
- `price/` - ціни
- `storage/` - файли
- `team/` - команда
- `user/` - користувачі

### Конфігурація
- `config/` - конфігураційні файли
  - `config.yaml` - основний конфігураційний файл
- `internal/config/` - структури конфігурації
  - `config.go` - структури для парсингу config.yaml
  - `storage.go` - конфігурація сховища

### База даних
- `internal/db/` - підключення до БД
- `migrations/` - міграції бази даних

### Утиліти
- `internal/utils/` - допоміжні функції
- `internal/validation/` - валідація даних
- `internal/cache/` - кешування
- `internal/constants/` - константи
- `internal/errors/` - обробка помилок
- `internal/auth/` - аутентифікація
- `internal/middleware/` - middleware
- `internal/router/` - маршрутизація

### Docker
- `docker-compose.yml` - конфігурація контейнерів
- `Dockerfile` - збірка додатку

### Веб-інтерфейс
- `web/` - статичні файли та шаблони
  - `templates/` - HTML шаблони
  - `public/` - статичні ресурси (CSS, JS, зображення)

### Документація
- `CLAUDE.md` - основна документація (396 рядків)
- `UserFlow.md` - опис користувацьких сценаріїв (433 рядки)
- `oauth-setup-instructions.txt` - налаштування OAuth (107 рядків)

## Точка входу
- `cmd/app/main.go` - головний файл програми



## Архітектурні принципи

Проект дотримується:
- Clean Architecture
- Dependency Injection
- Interface Segregation
- Single Responsibility

## Основні функціональні блоки

1. **Дашборд** (`/app`)
   - Статистика, ToDo, найближчі зйомки
   - Календар з позначками заброньованих днів
   - Фінансове зведення (дохід, прибуток, борги)

2. **Бронювання** (`/bookings`)
   - Управління резерваціями та клієнтами
   - Фінансова інформація та статуси
   - Команда, дедлайни, матеріали

3. **Календар** (`/calendar`)
   - Місячний/річний перегляд подій
   - Синхронізація з Google Calendar
   - Групування подій по днях

4. **Команда** (`/team`)
   - Управління учасниками та ролями
   - Рівні доступу та дозволи
   - Призначення на проекти

5. **Фінанси** (`/finance`)
   - Облік доходів та витрат
   - Аналітика по проектах
   - Борги та очікувані платежі

6. **Сховище** (`/storage`)
   - Зберігання фото/відео матеріалів (до 100GB)
   - Організація по проектах
   - Публічні посилання для клієнтів

7. **Прайс-лист** (`/price-list`)
   - Шаблони пакетів послуг
   - Налаштування цін та команди
   - Автозаповнення при бронюванні

8. **Контракти** (`/contracts`)
   - Шаблони документів
   - Автоматична генерація
   - Прив'язка до бронювань

9. **Налаштування** (`/settings`)
   - Профіль та брендинг
   - Інтеграції (Google, Telegram)
   - Шаблони та автоматизація

### Технічний Стек
- **Backend**: Go, PostgreSQL, GORM
- **Frontend**: Tabler UI, TailwindCSS
- **Аутентифікація**: JWT + OAuth (Google, Apple, Facebook)

## UI компоненти
Система використовує сучасний, мінімалістичний дизайн, оптимізований для зручності користування:

### Шрифти
- Основний шрифт: **Inter** (Google Fonts)
- Вагові варіації: 400 (Regular), 500 (Medium), 700 (Bold)

### Кольорова схема
```css
:root {
  --color-background: #FFFFFF;
  --color-section-bg: #F8F5F2;
  --color-light-accent: #E3D5CA;
  --color-neutral-accent: #D6CCC2;
  --color-contrast-accent: #D5BDAF;
  --color-text-primary: #2A2A2A;
  --color-text-secondary: #4A4744;
  
  --color-success: #2FB344;
  --color-warning: #F59F00;
  --color-danger: #D63939;
  --color-info: #4299E1;
  
  --color-sidebar-bg: var(--color-contrast-accent);
  --color-sidebar-text: rgba(255, 255, 255, 0.9);
  --color-sidebar-text-hover: white;
  --color-sidebar-active-bg: rgba(255, 255, 255, 0.1);
}
```

### Компоненти інтерфейсу
- Базується на фреймворку **Tabler UI**
- Адаптивний дизайн для мобільних пристроїв
- Інтерактивні елементи з анімацією для кращого UX
- Світла тема (з подальшими планами на темну тему)

## Аутентифікація
### Методи аутентифікації
- **Локальна**: email + пароль
- **OAuth**: Google, Facebook (Apple в планах)

### Рівні доступу
- **admin**: повний доступ до всіх функцій
- **user**: управління своїм акаунтом та командою
- **team_member**: обмежений доступ до призначених клієнтів та проектів
- **client**: обмежений доступ клієнтів до галерей та сторінок віддачі готового матеріалу


## Рекомендації щодо Продуктивності

1. **Кешування**
   - Redis для активних сесій та прав доступу
   - Кеш для частих запитів (активні бронювання, команда)
   - Інвалідація кешу при змінах

2. **Індексація**
   - Індекси для полів пошуку та сортування
   - Часткові індекси для активних записів
   - Індекси для зовнішніх ключів

3. **Оптимізація Запитів**
   - Зменшення кількості JOIN операцій
   - Використання MATERIALIZED VIEW для звітів
   - Пагінація для великих списків

4. **Асинхронні Операції**
   - Фонові завдання для важких операцій
   - Черга завдань для обробки файлів
   - Відкладена відправка сповіщень

## План Впровадження Змін

1. **Етап 1: Підготовка**
   - Аудит поточного коду
   - Створення тестового середовища
   - Резервне копіювання даних

2. **Етап 2: Оптимізація БД**
   - Спрощення схеми
   - Додавання індексів
   - Налаштування кешування

3. **Етап 3: Рефакторинг Коду**
   - Спрощення моделей
   - Оптимізація запитів
   - Покращення обробки помилок

4. **Етап 4: Тестування**
   - Навантажувальне тестування
   - Перевірка продуктивності
   - Виправлення помилок